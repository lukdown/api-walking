<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="yys">
	<!-- 전체리스트 -->
	<select id="courseList" parameterType="String"
		resultType="YysVo">

		<choose>
			<when test="users_no == 'total'">
				<![CDATA[
					select cl.course_no,
						   ul.users_no,
					       cl.course_name,
					       cl.course_difficulty,
					       cl.course_length,
					       cl.course_time,
					       cl.course_hit,
					       cl.course_region,
					       cl.course_date,
					       cl.course_open,
					       cl.course_introduce,
					       cf.course_favorites_no,
					       clike.course_like_no
					from course_list cl
					left join users_list ul on cl.users_no = ul.users_no
					left join course_point cp on cp.course_no = cl.course_no
					left join course_favorites cf on cf.course_no = cl.course_no
					left join course_like clike on clike.course_no = cl.course_no
				]]>
			</when>
			<when test="users_no != null">
				<![CDATA[
				select cl.course_no,
					   ul.users_no,
				       cl.course_name,
				       cl.course_difficulty,
				       cl.course_length,
				       cl.course_time,
				       cl.course_hit,
				       cl.course_region,
				       cl.course_date,
				       cl.course_open,
				       cl.course_introduce,
				       cf.course_favorites_no,
				       clike.course_like_no
				from course_list cl
				left join users_list ul on cl.users_no = ul.users_no
				left join course_point cp on cp.course_no = cl.course_no
				left join course_favorites cf on cf.course_no = cl.course_no
				left join course_like clike on clike.course_no = cl.course_no
				where cl.users_no = #{users_no}
				]]>


			</when>





			<otherwise></otherwise>
		</choose>
	</select>
	<!-- 전체리스트 -->
	<select id="coursefList" parameterType="String"
		resultType="YysVo">

		<choose>
			<when test="users_no != null">
				<![CDATA[
				select cl.course_no,
						   ul.users_no,
					       cl.course_name,
					       cl.course_difficulty,
					       cl.course_length,
					       cl.course_time,
					       cl.course_hit,
					       cl.course_region,
					       cl.course_date,
					       cl.course_open,
					       cl.course_introduce,
					       cf.course_favorites_no
					from course_favorites cf
					left join users_list ul on cf.users_no = ul.users_no
					left join course_list cl on cf.course_no = cl.course_no
					where cf.users_no = #{users_no}
				]]>

			</when>


			<otherwise></otherwise>
		</choose>
	</select>




</mapper>